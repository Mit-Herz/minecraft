networks:
  proxy:
    external: true

services:
  minecraft:
    image: snooops/neverendranche:9321bf7
    ports:
      - '25565:25565'
    volumes:
      - neverendranche:/data:rw
    networks:
      - proxy
    labels:
      backup: true
      traefik.enable: true
      
      traefik.http.middlewares.neverendranche-https-redirect.redirectscheme.scheme: https
      
      traefik.http.routers.neverendranche.entrypoints: http
      traefik.http.routers.neverendranche.rule: Host(`neverendranche.gamepus.net`)
      traefik.http.routers.neverendranche.middlewares: neverendranche-https-redirect

      traefik.http.routers.neverendranche-secure.entrypoints: https
      traefik.http.routers.neverendranche-secure.rule: Host(`neverendranche.gamepus.net`)
      traefik.http.routers.neverendranche-secure.tls: true
      traefik.http.routers.neverendranche-secure.tls.certresolver: http
      traefik.http.routers.neverendranche-secure.service: neverendranche
      traefik.http.routers.neverendranche-secure.middlewares: secHeaders@file
      traefik.http.services.neverendranche.loadbalancer.server.port: 8080
      traefik.docker.network: proxy

volumes:
  neverendranche:
